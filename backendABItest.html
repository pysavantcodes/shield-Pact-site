<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
</head>
<body>

<script type="text/javascript">
	
const RPC = {
		infuraId:"a6441c54b62c47519b6eaac2a8a59abc",
	  rpc: {
	   97:"https://data-seed-prebsc-2-s3.binance.org:8545/",
	   56: "https://bsc.nodereal.io",
	  },
	};

let clientAddress = '';

async function createConnection(){
	const provider = new WalletConnectProvider.default(RPC);
	await provider.enable();
	window._provider = provider;	
}

async function closeConnection(){
	await _provider.disconnect()
}

async function initW3(){
	const web3 = new Web3(_provider);
	clientAddress = (await web3.eth.getAccounts())[0];
	window._w3 = web3;

}

async function deployContract(ABI, byteCode){
	let deployedContract = new _w3.eth.Contract(ABI).deploy({data:byteCode, arguments:[]});

	const estimatedGas = await deployedContract.estimateGas()

	deployedContract = await deployedContract.send({
		from:clientAddress,
		gas:estimatedGas
	});
	window.myContract = deployedContract;
	return deployedContract
}



const ABI = [
	{
		"inputs": [],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"inputs": [],
		"name": "addValue",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getValue",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
];

const byteCode = "0x608060405234801561001057600080fd5b506000805560c6806100236000396000f3fe6080604052348015600f57600080fd5b506004361060325760003560e01c8063040f0aee1460375780632096525514603f575b600080fd5b603d6054565b005b60005460405190815260200160405180910390f35b600160008082825460649190606b565b9091555050565b60008219821115608b57634e487b7160e01b600052601160045260246000fd5b50019056fea26469706673582212204f0c48a906d39c51e2c87d5f71c975e1c0e7ee6c372836a30375ad0a7e87360664736f6c63430008070033";
</script>
</body>
</html>